{% extends 'sas/base.html' %}

{% load i18n %}
{% load bootstrap3 staticfiles %}
{% bootstrap_messages %}

{% block title %} {% trans "Search Booking" %} {% endblock %}

{% block content %}
<div class="row">
	<div class="col-xs-8 col-sm-6 col-md-6 col-md-offset-3 col-xs-offset-2 col-sm-offset-3">
		<h1 class="text-center">{% trans "Rooms Booking" %}</h1>
		<hr class="star-light">
		<div class="form-content" >
			<form class="form-horizontal" method = 'POST' role="form">
				<div class="form-group">
					{% csrf_token %}
					{% bootstrap_form search_booking %}
				</div>
				{% buttons %}
				<button class="btn btn-info btn-block" type = 'submit'>{% trans "Search" %}</button>
				{% endbuttons %}
			</form>
		</div>
	</div>

</div>

{% endblock %}
{% block extrastyle %}
<link rel="stylesheet" href="{% static 'plugins/datepicker/bootstrap-datepicker.css' %}" />
<link rel="stylesheet" href="{% static 'plugins/select2/css/select2.css' %}" />

{% endblock %}
{% block extrajs %}
<script src="{% static 'plugins/select2/js/select2.js' %}"> </script>
<script type="text/javascript">
$(function () {
	$('.datepicker1').datepicker({
		inline: true,
		sideBySide: true,
		format: '{% trans "mm/dd/yyyy" %}',
		language: '{% trans "en" %}',
		autoclose: true,
	});

  $(".select2").select2({
		theme: "classic"
	});
});

$(document).ready(function () {
	$('#id_building_name').change(function () {
		$("#id_room_name").prop('selectedIndex',0);
		var selected_building = $(this).find(":selected").text();
		$("#id_room_name option").hide();
		$("#id_room_name option").filter(function(){
			return $.trim($(this).text()).indexOf(selected_building) != -1
		}).show();
	});

	var search_options = $('#id_search_options');
	$(document).change(function () {
		var selected_option = $('input[name=search_options]:checked', '.form-horizontal').val();
		$('.form-horizontal input, .form-horizontal select').attr('disabled', false);

		if(selected_option == 'opt_day_room'){
			$("#id_booking_name, #id_end_date").toggle();
		}
		if(selected_option == 'opt_booking_week'){
			$("#id_room_name, #id_building_name").toggle();
		}
		if(selected_option == 'opt_building_day'){
			$("#id_room_name, #id_booking_name, #id_end_date").toggle();
		}
		if(selected_option == 'opt_room_period'){
			$("#id_booking_name").toggle();
		}
	});
});

</script>
<script src= "{% static 'plugins/datepicker/bootstrap-datepicker.js' %}"></script>
<script src= "{% static 'plugins/datepicker/locales/bootstrap-datepicker.pt-BR.min.js' %}"></script>
{% endblock %}
